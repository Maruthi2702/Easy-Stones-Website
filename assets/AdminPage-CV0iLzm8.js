import{c as u,r as n,j as e,S as B}from"./index-DHr6KV86.js";import{p as R}from"./products-B2gvYjSt.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],A=u("image",Q);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],q=u("plus",W);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],I=u("save",G);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],K=u("trash-2",J),X=()=>"http://localhost:3001",f=X(),M={UPLOAD:`${f}/api/upload`,SAVE_PRODUCTS:`${f}/api/products/save`,HEALTH:`${f}/api/health`},ee=()=>{var P;const[r,x]=n.useState(R),[m,j]=n.useState(null),[b,L]=n.useState(""),[g,z]=n.useState("All"),[v,O]=n.useState("All"),[o,C]=n.useState(!1),[N,d]=n.useState(null),l=r.find(s=>s.id===m),T=r.filter(s=>{const a=s.name.toLowerCase().includes(b.toLowerCase()),i=g==="All"||s.category===g,t=v==="All"||s.collection===v;return a&&i&&t}).sort((s,a)=>s.name.localeCompare(a.name)),D=s=>{j(s),d(null),window.scrollTo(0,0)},k=()=>{const s=Math.max(...r.map(i=>i.id),0)+1;x([{id:s,name:"New Product",category:"Quartz",price:"$0.00/sqft",collection:"Basic",availability:"In Stock",image:"/images/products/placeholder.jpg",isNew:!0,showInSlider:!1,thickness:["3CM"],sizes:[],description:"",primaryColor:"",accentColor:"",style:"",variations:"Low",finishes:["Polished"],applications:["Countertops","Backsplash","Wall Cladding"]},...r]),j(s),d({type:"info",message:"New product created. Fill in details and save."})},E=s=>{if(window.confirm("Are you sure you want to delete this product? This cannot be undone.")){const a=r.filter(i=>i.id!==s);x(a),m===s&&j(null),y(a)}},c=(s,a)=>{l&&x(i=>i.map(t=>t.id===m?{...t,[s]:a}:t))},p=(s,a,i)=>{if(!l)return;const t=l[s]||[];let h;i?h=[...t,a]:h=t.filter(V=>V!==a),c(s,h)},y=async(s=r)=>{C(!0),d(null);try{const i=await(await fetch(M.SAVE_PRODUCTS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({products:s})})).json();if(i.success)d({type:"success",message:"Changes saved successfully!"}),setTimeout(()=>d(null),3e3);else throw new Error(i.error||"Failed to save")}catch(a){console.error("Error saving:",a),d({type:"error",message:"Failed to save changes. Check server."})}finally{C(!1)}},S=["Luxe","Prestige","Signature","Basic"],w=["Quartz","Granite","Marble","Quartzite","MODA PST"],$=["1.5CM","2CM","3CM"],_=async s=>{const a=s.target.files[0];if(!a)return;const i=new FormData;i.append("image",a);try{const h=await(await fetch(M.UPLOAD,{method:"POST",body:i})).json();h.success?c("image",h.filePath):alert("Failed to upload image")}catch(t){console.error("Error uploading image:",t),alert("Error uploading image")}},F=["126 * 63","135 * 77","136 * 78","138 * 79","139 * 80","143 * 80"],H=["Polished","Honed","Leathered","Concrete"],U=["Countertops","Backsplash","Wall Cladding","Flooring","Shower Walls"];return e.jsxs("div",{className:"admin-container",children:[e.jsxs("div",{className:"admin-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:"Products"}),e.jsxs("button",{className:"add-btn",onClick:k,children:[e.jsx(q,{size:18})," New"]})]}),e.jsxs("div",{className:"search-box",children:[e.jsx(B,{size:16,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:b,onChange:s=>L(s.target.value)})]}),e.jsxs("div",{className:"filter-box",children:[e.jsxs("select",{value:g,onChange:s=>z(s.target.value),className:"sidebar-filter",children:[e.jsx("option",{value:"All",children:"All Categories"}),w.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:v,onChange:s=>O(s.target.value),className:"sidebar-filter",children:[e.jsx("option",{value:"All",children:"All Collections"}),S.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"product-list",children:T.map(s=>e.jsxs("div",{className:`product-list-item ${m===s.id?"active":""}`,onClick:()=>D(s.id),children:[e.jsx("img",{src:s.image,alt:s.name,className:"list-thumb"}),e.jsxs("div",{className:"list-info",children:[e.jsx("span",{className:"list-name",children:s.name}),e.jsxs("span",{className:"list-meta",children:[s.collection," â€¢ ",s.category]})]})]},s.id))})]}),e.jsxs("div",{className:"admin-main",children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Product Editor"}),e.jsxs("div",{className:"header-actions",children:[l&&e.jsxs("button",{className:"delete-btn",onClick:()=>E(l.id),children:[e.jsx(K,{size:18})," Delete"]}),e.jsxs("button",{className:`save-btn ${o?"saving":""}`,onClick:()=>y(),disabled:o,children:[e.jsx(I,{size:18})," ",o?"Saving...":"Save Changes"]})]})]}),N&&e.jsx("div",{className:`status-message ${N.type}`,children:N.message}),l?e.jsxs("div",{className:"edit-form",children:[e.jsxs("section",{className:"form-section",children:[e.jsx("h3",{children:"Basic Information"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Product Name"}),e.jsx("input",{type:"text",value:l.name,onChange:s=>c("name",s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price"}),e.jsx("input",{type:"text",value:l.price,onChange:s=>c("price",s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("select",{value:l.category,onChange:s=>c("category",s.target.value),children:w.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Collection"}),e.jsx("select",{value:l.collection,onChange:s=>c("collection",s.target.value),children:S.map(s=>e.jsx("option",{value:s,children:s},s))})]})]})]}),e.jsxs("section",{className:"form-section",children:[e.jsx("h3",{children:"Status & Media"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Availability"}),e.jsxs("select",{value:l.availability||"In Stock",onChange:s=>c("availability",s.target.value),className:`status-select ${(P=l.availability)==null?void 0:P.toLowerCase().replace(" ","-")}`,children:[e.jsx("option",{value:"In Stock",children:"In Stock"}),e.jsx("option",{value:"Out of Stock",children:"Out of Stock"}),e.jsx("option",{value:"Low Stock",children:"Low Stock"})]})]}),e.jsx("div",{className:"form-group checkbox-wrapper",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:l.isNew||!1,onChange:s=>c("isNew",s.target.checked)}),e.jsx("span",{children:"Mark as New Arrival"})]})}),e.jsx("div",{className:"form-group checkbox-wrapper",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:l.showInSlider||!1,onChange:s=>c("showInSlider",s.target.checked)}),e.jsx("span",{children:"Show in Home Slider"})]})}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Product Image"}),e.jsxs("div",{className:"image-input-wrapper",children:[e.jsxs("div",{className:"image-upload-controls",children:[e.jsx("input",{type:"text",value:l.image,onChange:s=>c("image",s.target.value),placeholder:"Image URL or path",className:"image-url-input"}),e.jsxs("div",{className:"file-upload-btn-wrapper",children:[e.jsxs("button",{className:"secondary-btn upload-btn",children:[e.jsx(A,{size:16})," Upload Image"]}),e.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"file-input-hidden"})]})]}),e.jsx("div",{className:"image-preview",children:e.jsx("img",{src:l.image,alt:"Preview",onError:s=>s.target.src="/images/products/placeholder.jpg"})})]})]})]})]}),e.jsxs("section",{className:"form-section",children:[e.jsx("h3",{children:"Details & Description"}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:"4",value:l.description||"",onChange:s=>c("description",s.target.value),placeholder:"Enter product description..."})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Primary Color"}),e.jsx("input",{type:"text",value:l.primaryColor||"",onChange:s=>c("primaryColor",s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Accent Color"}),e.jsx("input",{type:"text",value:l.accentColor||"",onChange:s=>c("accentColor",s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Style"}),e.jsx("input",{type:"text",value:l.style||"",onChange:s=>c("style",s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Variations"}),e.jsxs("select",{value:l.variations||"Low",onChange:s=>c("variations",s.target.value),children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})]})]})]}),e.jsxs("section",{className:"form-section",children:[e.jsx("h3",{children:"Specifications"}),e.jsxs("div",{className:"specs-group",children:[e.jsx("label",{children:"Thickness"}),e.jsx("div",{className:"checkbox-grid",children:$.map(s=>e.jsxs("label",{className:"checkbox-pill",children:[e.jsx("input",{type:"checkbox",checked:(l.thickness||[]).includes(s),onChange:a=>p("thickness",s,a.target.checked)}),e.jsx("span",{children:s})]},s))})]}),e.jsxs("div",{className:"specs-group",children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:"checkbox-grid",children:F.map(s=>e.jsxs("label",{className:"checkbox-pill",children:[e.jsx("input",{type:"checkbox",checked:(l.sizes||[]).includes(s),onChange:a=>p("sizes",s,a.target.checked)}),e.jsx("span",{children:s})]},s))})]}),e.jsxs("div",{className:"specs-group",children:[e.jsx("label",{children:"Finishes"}),e.jsx("div",{className:"checkbox-grid",children:H.map(s=>e.jsxs("label",{className:"checkbox-pill",children:[e.jsx("input",{type:"checkbox",checked:(l.finishes||[]).includes(s),onChange:a=>p("finishes",s,a.target.checked)}),e.jsx("span",{children:s})]},s))})]}),e.jsxs("div",{className:"specs-group",children:[e.jsx("label",{children:"Applications"}),e.jsx("div",{className:"checkbox-grid",children:U.map(s=>e.jsxs("label",{className:"checkbox-pill",children:[e.jsx("input",{type:"checkbox",checked:(l.applications||[]).includes(s),onChange:a=>p("applications",s,a.target.checked)}),e.jsx("span",{children:s})]},s))})]})]}),e.jsx("div",{className:"form-actions-bottom",children:e.jsxs("button",{className:`save-btn ${o?"saving":""}`,onClick:()=>y(),disabled:o,children:[e.jsx(I,{size:18})," ",o?"Saving...":"Save Changes"]})})]}):e.jsxs("div",{className:"empty-selection",children:[e.jsx(A,{size:48}),e.jsx("h2",{children:"Select a product to edit"}),e.jsx("p",{children:"Or create a new product to get started"}),e.jsx("button",{className:"primary-btn",onClick:k,children:"Create New Product"})]})]})]})};export{ee as default};
